{
    "defaults": {
      "domain": "CoreMaitreDesComptes",
      "exchange": "2.prive"
    },
    "requests": [
      {"domain": "CoreTopologie", "action": "listeApplicationsDeployees"},
      {"action": "chargerUsager", "exchange": "1.public"},
      {"action": "getCsrRecoveryParcode"}
    ],
    "commands": [
      {"action": "inscrireUsager"},
      {"action": "ajouterCsrRecovery"},
      {"action": "genererChallenge"},
      {"action": "ajouterCle"},
      {"action": "signerCompteUsager"},
      {"action": "ajouterDelegationSignee"}
    ],
    "subscriptions": [
        {
            "subscribe": "ecouterEvenementsActivationFingerprint",
            "unsubscribe": "retirerEvenementsActivationFingerprint",
            "exchanges": ["2.prive"],
            "routingKeys": [
                "evenement.CoreMaitreDesComptes.{fingerprintPk}.activationFingerprintPk"
            ]
        },
        {
            "subscribe": "ecouterEvenementsCompteUsager",
            "unsubscribe": "retirerEvenementsCompteUsager",
            "exchanges": ["2.prive"],
            "routingKeys": [
                "evenement.CoreMaitreDesComptes.{USER_ID}.majCompteUsager"
            ]
        }
    ]
}
